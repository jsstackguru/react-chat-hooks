(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{27:function(e,t,a){e.exports=a(85)},34:function(e,t,a){},85:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(9),s=a.n(o),l=a(1),r=a(2),i=(a(32),a(33),a(34),a(6)),m={appID:"845716c5962833",apiKey:"a9b1446f6334c5ad2d7f3b5707b8bb3886672cd7"},u=function(e){var t=Object(n.useState)(""),a=Object(r.a)(t,2),o=a[0],s=a[1],u=Object(n.useState)(!1),d=Object(r.a)(u,2),g=d[0],f=d[1];return c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-6 login-form mx-auto"},c.a.createElement("h3",null,"Login to Awesome Chat"),c.a.createElement("form",{className:"mt-5",onSubmit:function(t){t.preventDefault(),f(!0),l.CometChat.login(o,m.apiKey).then(function(t){i.NotificationManager.success("You are now logged in","Login Success"),console.log("Login Successful:",{User:t}),e.setUser(t)},function(e){i.NotificationManager.error("Please try again","Login Failed"),console.log("Login failed with exception:",{error:e}),f(!1)})}},c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{type:"text",name:"username",className:"form-control",placeholder:"Your Username",value:o,onChange:function(e){return s(e.target.value)}})),c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{type:"submit",className:"btn btn-primary btn-block",value:"".concat(g?"Loading...":"Login"),disabled:g})))))},d=a(11),g=a(10),f=a.n(g),h=function(e){var t=e.chat,a=e.chatIsLoading,n=e.user;return a?c.a.createElement("div",{className:"col-xl-12 my-auto text-center"},c.a.createElement(f.a,{size:"72"})):c.a.createElement("div",{className:"col-xl-12"},t.map(function(e){return c.a.createElement("div",{key:e.id,className:"message"},c.a.createElement("div",{className:"".concat(e.receiver!==n.uid?"balon1":"balon2"," p-3 m-1")},e.text))}),c.a.createElement("div",{id:"ccChatBoxEnd"}))},E=function(e){var t=e.friends,a=e.friendisLoading,n=e.selectedFriend;return a?c.a.createElement("div",{className:"col-xl-12 my-auto text-center"},c.a.createElement(f.a,{size:"72"})):c.a.createElement("ul",{className:"list-group list-group-flush w-100"},t.map(function(t){return c.a.createElement("li",{key:t.uid,className:"list-group-item ".concat(t.uid===n?"active":""),onClick:function(){return e.selectFriend(t.uid)}},t.name)}))},b=function(e){var t=e.user,a=Object(n.useState)([]),o=Object(r.a)(a,2),s=o[0],i=o[1],m=Object(n.useState)(null),u=Object(r.a)(m,2),g=u[0],f=u[1],b=Object(n.useState)([]),v=Object(r.a)(b,2),p=v[0],w=v[1],N=Object(n.useState)(!1),C=Object(r.a)(N,2),y=C[0],j=C[1],O=Object(n.useState)(!0),x=Object(r.a)(O,2),L=x[0],S=x[1],M=Object(n.useState)(""),I=Object(r.a)(M,2),k=I[0],U=I[1];Object(n.useEffect)(function(){return(new l.CometChat.UsersRequestBuilder).setLimit(30).build().fetchNext().then(function(e){console.log("User list received:",e),i(e),S(!1)},function(e){console.log("User list fetching failed with error:",e)}),function(){l.CometChat.removeMessageListener("listener-key"),l.CometChat.logout()}},[]),Object(n.useEffect)(function(){g&&((new l.CometChat.MessagesRequestBuilder).setUID(g).setLimit(30).build().fetchPrevious().then(function(e){w(e),j(!1),R()},function(e){console.log("Message fetching failed with error:",e)}),l.CometChat.removeMessageListener("listener-key"),l.CometChat.addMessageListener("listener-key",new l.CometChat.MessageListener({onTextMessageReceived:function(e){console.log("Incoming Message Log",{message:e}),g===e.sender.uid&&w(function(t){return[].concat(Object(d.a)(t),[e])})}})))},[g]);var R=function(){document.getElementById("ccChatBoxEnd").scrollIntoView()};return c.a.createElement("div",{className:"container-fluid"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-2"}),c.a.createElement("div",{className:"col-md-8 h-100pr border rounded"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-4 col-xs-12 bg-light",style:{height:658}},c.a.createElement("div",{className:"row p-3"},c.a.createElement("h2",null,"Friend List")),c.a.createElement("div",{className:"row ml-0 mr-0 h-75 bg-white border rounded",style:{height:"100%",overflow:"auto"}},c.a.createElement(E,{friends:s,friendisLoading:L,selectedFriend:g,selectFriend:function(e){f(e),w([]),j(!0)}}))),c.a.createElement("div",{className:"col-lg-8 col-xs-12 bg-light",style:{height:658}},c.a.createElement("div",{className:"row p-3 bg-white"},c.a.createElement("h2",null,"Who you gonna chat with?")),c.a.createElement("div",{className:"row pt-5 bg-white",style:{height:530,overflow:"auto"}},c.a.createElement(h,{chat:p,chatIsLoading:y,user:t})),c.a.createElement("div",{className:"row bg-light",style:{bottom:0,width:"100%"}},c.a.createElement("form",{className:"row m-0 p-0 w-100",onSubmit:function(e){e.preventDefault();var t=new l.CometChat.TextMessage(g,k,l.CometChat.MESSAGE_TYPE.TEXT,l.CometChat.RECEIVER_TYPE.USER);l.CometChat.sendMessage(t).then(function(e){console.log("Message sent successfully:",e),w([].concat(Object(d.a)(p),[e]))},function(e){console.log("Message sending failed with error:",e)}),U("")}},c.a.createElement("div",{className:"col-9 m-0 p-1"},c.a.createElement("input",{id:"text",className:"mw-100 border rounded form-control",type:"text",onChange:function(e){U(e.target.value)},value:k,placeholder:"Type a message..."})),c.a.createElement("div",{className:"col-3 m-0 p-1"},c.a.createElement("button",{className:"btn btn-outline-secondary rounded border w-100",title:"Send",style:{paddingRight:16}},"Send")))))))))},v=function(){var e=Object(n.useState)(null),t=Object(r.a)(e,2),a=t[0],o=t[1];return c.a.createElement("div",{className:"container"},c.a.createElement(i.NotificationContainer,null),a?c.a.createElement(b,{user:a}):c.a.createElement(u,{setUser:o}))};l.CometChat.init(m.appID),s.a.render(c.a.createElement(v,null),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.b8dd0cb4.chunk.js.map